{"version":3,"file":"static/js/251.7c7b0d77.chunk.js","mappings":"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","sources":["../node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","../node_modules/@babel/runtime/helpers/esm/toPrimitive.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js","Dice.jsx"],"sourcesContent":["function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nexport { _defineProperty as default };","import defineProperty from \"./defineProperty.js\";\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread2(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nexport { _objectSpread2 as default };","import { useState, useRef, useEffect } from 'react';\r\n\r\n// constants:\r\nconst DICE_RE = /(?<!\\d)(\\d*)\\s*[dD]\\s*(\\d+)(?!\\d)/g;\r\n\r\n// tool functions:\r\nexport function trimMessage(message) {\r\n  const results = [];\r\n  let m;\r\n\r\n  while ((m = DICE_RE.exec(message)) !== null) {\r\n    const count = m[1] ? parseInt(m[1], 10) : 1;\r\n    const sides = parseInt(m[2], 10);\r\n\r\n    if (count > 0 && sides > 0) {\r\n      results.push({ count, sides, raw: m[0].trim() });\r\n    }\r\n  }\r\n  return results;\r\n}\r\n\r\nexport function rollOnce(sides) {\r\n  return Math.floor(Math.random() * sides) + 1;\r\n}\r\n\r\nexport function rollDice(count, sides) {\r\n  const rolls = Array.from({ length: count }, () => rollOnce(sides));\r\n  const total = rolls.reduce((a, b) => a + b, 0);\r\n  return { rolls, total };\r\n}\r\n\r\nexport function rollFromText(text) {\r\n  const specs = trimMessage(text);\r\n\r\n  return specs.map(spec => ({\r\n    spec,\r\n    ...rollDice(spec.count, spec.sides),\r\n  }));\r\n}\r\n\r\nexport function formatRollResults(results) {\r\n  if (!results || results.length === 0) return null;\r\n\r\n  const lines = results.map((r, i) => {\r\n    const rollsStr = r.rolls.join(', ');\r\n    return (\r\n      <div className=\"dice-line\" key={i}>\r\n        Results :\r\n        {' '}\r\n        <span className=\"dice-total\">{r.total}</span>\r\n        {'  ('}\r\n        <span className=\"dice-rolls\">{rollsStr}</span>\r\n        {')'}\r\n      </div>\r\n    );\r\n  });\r\n\r\n  // in case if multiple rolls, show grand total\r\n  if (results.length > 1) {\r\n    const grandTotal = results.reduce((s, r) => s + r.total, 0);\r\n    lines.push(\r\n      <div className=\"dice-grand\" key=\"grand\">\r\n        Total Sum: <span className=\"dice-grand-total\">{grandTotal}</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return <div className=\"dice-results\">{lines}</div>;\r\n}\r\n\r\nconst renderBody = (m) => {\r\n  if (m.type === 'reply' && m.content?.kind === 'roll') {\r\n    return formatRollResults(m.content.results);\r\n  }\r\n  return m.content;\r\n};\r\n\r\n// ------------------------main component------------------------\r\nexport default function DiceRolling() {\r\n  // inside states\r\n  const [messages, setMessages] = useState([]);\r\n  const [input, setInput] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [editingId, setEditingId] = useState(null);\r\n  const [editText, setEditText] = useState('');\r\n\r\n  const [histories, setHistories] = useState({});\r\n  const messagesEndRef = useRef(null);\r\n  const inputRef = useRef(null);\r\n\r\n  // inside functions\r\n  const scrollToBottom = () => { messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' }); };\r\n  const uuid = () => (crypto?.randomUUID ? crypto.randomUUID() : Date.now().toString());\r\n  const cloneMsgs = (arr) => arr.map(m => ({ ...m }));\r\n  const msgsEqual = (a, b) =>\r\n    a.length === b.length &&\r\n    a.every((m, i) => m.id === b[i].id && m.type === b[i].type && m.content === b[i].content);\r\n\r\n  const handleReset = () => {\r\n    if (!window.confirm('Clear all messages and history?')) return;\r\n\r\n    setMessages([]);\r\n    setHistories({});\r\n    setEditingId(null);\r\n    setEditText('');\r\n    setError(null);\r\n    inputRef.current?.focus();\r\n  };\r\n\r\n  useEffect(() => {\r\n    setHistories(prev => {\r\n      let changed = false;\r\n      const next = { ...prev };\r\n\r\n      for (const [mid, h] of Object.entries(prev)) {\r\n        const idx = messages.findIndex(m => m.id === mid);\r\n        if (idx !== -1) {\r\n          const newSuffix = cloneMsgs(messages.slice(idx + 1));\r\n          const curVer = h.versions[h.currentIndex];\r\n\r\n          if (!msgsEqual(curVer.suffix, newSuffix)) {\r\n            const newVersions = h.versions.slice();\r\n            newVersions[h.currentIndex] = { ...curVer, suffix: newSuffix };\r\n            next[mid] = { ...h, versions: newVersions };\r\n            changed = true;\r\n          }\r\n        }\r\n      }\r\n      return changed ? next : prev;\r\n    });\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!input.trim()) return;\r\n\r\n    const userMessage = input.trim();\r\n    setInput('');\r\n    setError(null);\r\n\r\n    const newUserMessage = {\r\n      type: 'user',\r\n      content: userMessage,\r\n      id: Date.now().toString(),\r\n    };\r\n\r\n    const snapshot = [...messages, newUserMessage];\r\n    setMessages(snapshot);\r\n    await generateResponse(snapshot);\r\n  };\r\n\r\n  // response generation\r\n  const generateResponse = async (_messageHistory) => {\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const lastUser = [..._messageHistory].reverse().find(m => m.type === 'user');\r\n      const text = lastUser?.content ?? '';\r\n      const results = rollFromText(text);\r\n      if (!results.length) return;\r\n      setMessages(prev => [\r\n        ...prev,\r\n        {\r\n          type: 'reply',\r\n          content: { kind: 'roll', results },\r\n          id: uuid(),\r\n        }\r\n      ]);\r\n    }\r\n    finally {\r\n      setLoading(false);\r\n      inputRef.current?.focus();\r\n    }\r\n  };\r\n\r\n  const startEdit = (message) => {\r\n    setEditingId(message.id);\r\n    setEditText(message.content);\r\n  };\r\n\r\n  const cancelEdit = () => {\r\n    setEditingId(null);\r\n    setEditText('');\r\n  };\r\n\r\n  const saveEdit = async (messageId) => {\r\n    if (!editText.trim()) return;\r\n\r\n    const messageIndex = messages.findIndex(m => m.id === messageId);\r\n    if (messageIndex === -1) return;\r\n\r\n    const original = messages[messageIndex];\r\n    if (original.type !== 'user') return;\r\n\r\n    const prefix = cloneMsgs(messages.slice(0, messageIndex));\r\n    const originalSuffix = cloneMsgs(messages.slice(messageIndex + 1));\r\n    const newContent = editText.trim();\r\n\r\n    setHistories(prev => {\r\n      const next = { ...prev };\r\n      if (!next[messageId]) {\r\n        next[messageId] = {\r\n          messageId,\r\n          versions: [{\r\n            id: uuid(),\r\n            content: original.content,\r\n            suffix: originalSuffix,\r\n            createdAt: Date.now(),\r\n          }],\r\n          currentIndex: 0,\r\n        };\r\n      }\r\n      return next;\r\n    });\r\n\r\n    setHistories(prev => {\r\n      const h = prev[messageId];\r\n      const newVersion = {\r\n        id: uuid(),\r\n        content: newContent,\r\n        suffix: [],\r\n        createdAt: Date.now(),\r\n      };\r\n      return {\r\n        ...prev,\r\n        [messageId]: {\r\n          messageId,\r\n          versions: [...h.versions, newVersion],\r\n          currentIndex: h.versions.length,\r\n        }\r\n      };\r\n    });\r\n\r\n    const editedUser = { ...original, content: newContent };\r\n    const newMsgs = [...prefix, editedUser];\r\n    setMessages(newMsgs);\r\n    setEditingId(null);\r\n    setEditText('');\r\n\r\n    await generateResponse(newMsgs);\r\n  };\r\n\r\n  const navigateVersion = (messageId, dir) => {\r\n    setHistories(prev => {\r\n      const h = prev[messageId];\r\n      if (!h) return prev;\r\n\r\n      const nextIndex = Math.max(0, Math.min(h.versions.length - 1, h.currentIndex + dir));\r\n      if (nextIndex === h.currentIndex) return prev;\r\n\r\n      const selected = h.versions[nextIndex];\r\n\r\n      setMessages(curr => {\r\n        const idx = curr.findIndex(m => m.id === messageId);\r\n        if (idx === -1) return curr;\r\n        const prefix = cloneMsgs(curr.slice(0, idx));\r\n        const user = { ...curr[idx], content: selected.content };\r\n        const suffix = cloneMsgs(selected.suffix);\r\n        return [...prefix, user, ...suffix];\r\n      });\r\n\r\n      return {\r\n        ...prev,\r\n        [messageId]: { ...h, currentIndex: nextIndex }\r\n      };\r\n    });\r\n  };\r\n\r\n  const renderMessage = (message) => {\r\n    const isEditing = editingId === message.id;\r\n    const history = histories[message.id];\r\n    const hasHistory = !!history && history.versions.length >= 1;\r\n    const canPrev = hasHistory && history.currentIndex > 0;\r\n    const canNext = hasHistory && history.currentIndex < history.versions.length - 1;\r\n\r\n    return (\r\n      <div key={message.id} className={`message ${message.type}`}>\r\n        {isEditing ? (\r\n          <div className=\"edit-container\">\r\n            <textarea\r\n              value={editText}\r\n              onChange={(e) => setEditText(e.target.value)}\r\n              className=\"edit-textarea\"\r\n              autoFocus\r\n            />\r\n            <div className=\"edit-buttons\">\r\n              <button onClick={() => saveEdit(message.id)} disabled={loading || !editText.trim()} className=\"save-button\">\r\n                Save\r\n              </button>\r\n              <button onClick={cancelEdit} disabled={loading} className=\"cancel-button\">\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"message-wrapper\">\r\n            <div className=\"message-content\">{renderBody(message)}</div>\r\n\r\n            {message.type === 'user' && (\r\n              <button onClick={() => startEdit(message)} className=\"edit-button\" disabled={loading}>\r\n                Edit\r\n              </button>\r\n            )}\r\n            {hasHistory && (\r\n              <div className=\"navigation-buttons\">\r\n                <button\r\n                  onClick={() => navigateVersion(message.id, -1)}\r\n                  className=\"nav-button\"\r\n                  disabled={loading || !canPrev}\r\n                  aria-label=\"Previous version\"\r\n                  title=\"Previous edited version\"\r\n                >\r\n                  &lt;\r\n                </button>\r\n                <span className=\"nav-indicator\">\r\n                  {history.currentIndex + 1}/{history.versions.length}\r\n                </span>\r\n                <button\r\n                  onClick={() => navigateVersion(message.id, 1)}\r\n                  className=\"nav-button\"\r\n                  disabled={loading || !canNext}\r\n                  aria-label=\"Next version\"\r\n                  title=\"Next edited version\"\r\n                >\r\n                  &gt;\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <p className=\"dice-title\"><strong>ðŸŽ² Table Dice Roller ðŸŽ²</strong></p>\r\n\r\n      <div className=\"dice-instruction\">\r\n        <p>\r\n          Please type \"number of dice + 'd' + number of sides on the dice\" to roll the dice\r\n        </p>\r\n        <p>\r\n          This app is aimed to log and track your dice numbers and what happens when playing table games\r\n        </p>\r\n        <p>\r\n          Feel free to type some notes, it will keep your notes until you reload this web page\r\n        </p>\r\n        <p>\r\n          Example of use:\r\n        </p>\r\n        <p>\r\n          \"I got damaged from a ghoul, received damage 1 d 6\"\r\n        </p>\r\n        <p>\r\n          \"I observed a murder, my sanity got hurt 1 d 4\"\r\n        </p>\r\n      </div>\r\n\r\n      <div className=\"chat-container\">\r\n        <div className=\"messages\">\r\n          {messages.map(renderMessage)}\r\n          {loading && (\r\n            <div className=\"message assistant\">\r\n              <div className=\"loading\">\r\n                <span></span><span></span><span></span>\r\n              </div>\r\n            </div>\r\n          )}\r\n          {error && <div className=\"error-message\">Error: {error}</div>}\r\n          <div ref={messagesEndRef} />\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit} className=\"input-form\">\r\n          <input\r\n            ref={inputRef}\r\n            type=\"text\"\r\n            value={input}\r\n            onChange={(e) => setInput(e.target.value)}\r\n            placeholder=\"Type your message...\"\r\n            className=\"input-box\"\r\n            disabled={loading}\r\n          />\r\n          <button type=\"submit\" disabled={loading || !input.trim()}>\r\n            Send\r\n          </button>\r\n        </form>\r\n      </div>\r\n\r\n      <button\r\n        type=\"button\"\r\n        className=\"reset-btn\"\r\n        onClick={handleReset}\r\n        aria-label=\"Reset all messages\"\r\n        title=\"Reset\"\r\n      >\r\n        Reset\r\n      </button>\r\n\r\n    </div>\r\n  );\r\n}\r\n"],"names":["_typeof","o","Symbol","iterator","constructor","prototype","toPropertyKey","t","i","r","e","toPrimitive","call","TypeError","String","Number","_defineProperty","Object","defineProperty","value","enumerable","configurable","writable","ownKeys","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","push","apply","_objectSpread2","arguments","length","forEach","getOwnPropertyDescriptors","defineProperties","DICE_RE","trimMessage","message","results","m","exec","count","parseInt","sides","raw","trim","rollOnce","Math","floor","random","rollDice","rolls","Array","from","total","reduce","a","b","rollFromText","text","map","spec","_objectSpread","formatRollResults","lines","rollsStr","join","_jsxs","className","children","_jsx","grandTotal","s","renderBody","_m$content","type","content","kind","DiceRolling","messages","setMessages","useState","input","setInput","loading","setLoading","error","setError","editingId","setEditingId","editText","setEditText","histories","setHistories","messagesEndRef","useRef","inputRef","uuid","_crypto","crypto","randomUUID","Date","now","toString","cloneMsgs","arr","msgsEqual","every","id","useEffect","prev","changed","next","mid","h","entries","idx","findIndex","newSuffix","slice","curVer","versions","currentIndex","suffix","newVersions","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","generateResponse","async","_lastUser$content","lastUser","_messageHistory","reverse","find","_inputRef$current2","focus","cancelEdit","navigateVersion","messageId","dir","nextIndex","max","min","selected","curr","isEditing","history","hasHistory","canPrev","canNext","concat","onChange","target","autoFocus","onClick","messageIndex","original","prefix","originalSuffix","newContent","createdAt","newVersion","newMsgs","saveEdit","disabled","startEdit","title","ref","onSubmit","preventDefault","userMessage","newUserMessage","snapshot","placeholder","handleReset","_inputRef$current","window","confirm"],"sourceRoot":""}