"use strict";(self.webpackChunkreact_dev=self.webpackChunkreact_dev||[]).push([[212],{212:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var r=n(43),o=n(579);const s=4,c=-1,l=80,a=10;function i(e){return Array.from({length:e},()=>Array(e).fill(0))}function u(e){const t=[];for(let n=0;n<e.length;n++)for(let r=0;r<e[n].length;r++)0===e[n][r]&&t.push([n,r]);return t}function d(e){const t=u(e);if(0===t.length)return e;const[n,r]=t[Math.floor(Math.random()*t.length)],o=e.map(e=>e.slice());return Math.random()<.3?o[n][r]=c:o[n][r]=Math.random()<.9?2:4,o}function f(){let e=i(s);return e=d(e),e=d(e),e}function m(e,t){const n=e===c;return e===t&&!n||n!==(t===c)}function h(e,t){const n=e===c;if(n&&t===c)return 0;return 2*(n?t:e)}function v(e){const t=e.length,n=i(t);for(let r=0;r<t;r++)for(let o=0;o<t;o++)n[t-1-o][r]=e[r][o];return n}function w(e){const t=e.length,n=i(t);for(let r=0;r<t;r++)for(let o=0;o<t;o++)n[o][t-1-r]=e[r][o];return n}function p(e){return e.map(e=>e.slice().reverse())}function g(e){const t=[];for(let a=0;a<e.length;a++)0!==e[a]&&t.push({v:e[a],fromC:a});const n=[],r=[],o=[];let s=0,c=0;for(let a=0;a<t.length;a++){const e=t[a],l=t[a+1];if(l&&m(e.v,l.v)){const t=h(e.v,l.v);n.push(t),r.push({fromC:e.fromC,toC:c,v:e.v,willMerge:!0}),r.push({fromC:l.fromC,toC:c,v:l.v,willMerge:!0}),o.push(c),s+=t,c++,a++}else n.push(e.v),r.push({fromC:e.fromC,toC:c,v:e.v,willMerge:!1}),c++}for(;n.length<e.length;)n.push(0);const l=r.some(e=>e.fromC!==e.toC);return{merged:n,moves:r,mergedDestCols:o,moved:l,gained:s}}function x(e,t){const n=e.length;let r=e.map(e=>e.slice());"up"===t?r=v(r):"down"===t?r=w(r):"right"===t&&(r=p(r));const o=[],s=[],c=[];let l=0,a=!1;for(let m=0;m<n;m++){const{merged:e,moves:t,mergedDestCols:n,moved:i,gained:u}=g(r[m]);o.push(e),s.push({r:m,moves:t}),n.forEach(e=>c.push({r:m,c:e})),i&&(a=!0),l+=u}let i="up"===t?w(o):"down"===t?v(o):"right"===t?p(o):o;function u(e,r){return"left"===t?{r:e,c:r}:"up"===t?{r:r,c:n-1-e}:"down"===t?{r:n-1-r,c:e}:{r:e,c:n-1-r}}const d=[];s.forEach(e=>{let{r:r,moves:o}=e;o.forEach(e=>{const o=function(e,r){return"left"===t?{r:e,c:r}:"up"===t?{r:r,c:n-1-e}:"down"===t?{r:n-1-r,c:e}:{r:e,c:n-1-r}}(r,e.fromC),s=u(r,e.toC);d.push({fromR:o.r,fromC:o.c,toR:s.r,toC:s.c,v:e.v,willMerge:e.willMerge})})});const f=c.map(e=>{let{r:t,c:n}=e;return u(t,n)});return{next:i,movedAny:a,gainedTotal:l,moves:d,mergedDest:f}}function C(e){return e===c?"cell2048 wild2048":"cell2048 v".concat(e||0)}function j(e,t){return"".concat(e,"-").concat(t)}function S(e,t){return{x:t*(l+a),y:e*(l+a)}}function b(){const[e,t]=(0,r.useState)(()=>f()),[n,l]=(0,r.useState)(0),[a,i]=(0,r.useState)(!1),[m,h]=(0,r.useState)([]),[v,w]=(0,r.useState)(!1),[p,g]=(0,r.useState)(()=>new Set),[b,y]=(0,r.useState)(()=>new Set),[N,k]=(0,r.useState)(()=>new Set);function M(n){if(a)return;const{next:r,movedAny:o,gainedTotal:s,moves:f,mergedDest:m}=x(e,n);o&&(h(f),g(new Set(f.map(e=>j(e.fromR,e.fromC)))),w(!1),requestAnimationFrame(()=>requestAnimationFrame(()=>w(!0))),window.setTimeout(()=>{const e=d(r),n=function(e,t){const n=[];for(let r=0;r<e.length;r++)for(let o=0;o<e[r].length;o++)0===e[r][o]&&0!==t[r][o]&&n.push("".concat(r,"-").concat(o));return n}(r,e);n.length&&(k(new Set(n)),window.setTimeout(()=>k(new Set),140)),t(e),l(e=>e+s),h([]),g(new Set),y(new Set(m.map(e=>j(e.r,e.c)))),function(e){if(u(e).length>0)return!1;const t=e.length;for(let n=0;n<t;n++)for(let r=0;r<t;r++){const o=e[n][r];if(r+1<t){const t=e[n][r+1];if(o===t&&o!==c||o===c!==(t===c))return!1}if(n+1<t){const t=e[n+1][r];if(o===t&&o!==c||o===c!==(t===c))return!1}}return!0}(e)&&i(!0),window.setTimeout(()=>y(new Set),140)},65))}return(0,r.useEffect)(()=>{const e=e=>{const t={arrowup:"up",arrowdown:"down",arrowleft:"left",arrowright:"right",w:"up",s:"down",a:"left",d:"right"}[e.key.toLowerCase()];t&&(e.preventDefault(),M(t))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[e,a]),(0,o.jsxs)("div",{className:"container2048",children:[(0,o.jsxs)("div",{className:"instruction2048",children:[(0,o.jsx)("p",{children:"Control Keys:"}),(0,o.jsx)("p",{children:'Buttons below or "AWSD" on your keyboard'}),(0,o.jsx)("p",{children:"Note:"}),(0,o.jsx)("p",{children:"?? can merge with any numbers but itself"})]}),(0,o.jsxs)("div",{className:"header2048",children:[(0,o.jsx)("h2",{className:"title2048",children:"2048"}),(0,o.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,o.jsxs)("span",{className:"score2048",children:["Score: ",n]}),(0,o.jsx)("button",{className:"btn2048",onClick:function(){const e=f();t(f()),l(0),i(!1),h([]),g(new Set),y(new Set),w(!1);const n=[];for(let t=0;t<s;t++)for(let r=0;r<s;r++)0!==e[t][r]&&n.push("".concat(t,"-").concat(r));k(new Set(n)),window.setTimeout(()=>k(new Set),140)},children:"New Game"})]})]}),a&&(0,o.jsx)("p",{className:"GameOver2048",children:" Game Over "}),(0,o.jsxs)("div",{className:"boardWrap2048",children:[(0,o.jsx)("div",{className:"grid2048",style:{"--cols":s},children:e.map((e,t)=>e.map((e,n)=>{const r=j(t,n),s=p.has(r),l=b.has(r),a=N.has(r),i=C(e)+(s?" movingOut2048":"")+(l?" flash2048":"")+(a?" spawn2048":"");return(0,o.jsx)("div",{className:i,children:e===c?"??":e||""},r)}))}),(0,o.jsx)("div",{className:"animLayer2048",children:m.map((e,t)=>{const n=S(e.fromR,e.fromC),r=S(e.toR,e.toC),s=r.x-n.x,l=r.y-n.y,a={left:n.x,top:n.y,transform:"translate3d(".concat(v?s:0,"px, ").concat(v?l:0,"px, 0)"),transitionDuration:"".concat(65,"ms")};return(0,o.jsx)("div",{className:"movingTile2048",children:(0,o.jsx)("div",{className:"movingInner2048 ".concat(C(e.v)),style:a,children:e.v===c?"??":e.v})},t)})})]}),(0,o.jsxs)("div",{className:"controls2048",role:"group","aria-label":"Move controls",children:[(0,o.jsx)("div",{}),(0,o.jsx)("button",{className:"btn2048 arrowBtn2048",onClick:()=>M("up"),"aria-label":"Up",children:"\ud83d\udd3c"}),(0,o.jsx)("div",{}),(0,o.jsx)("button",{className:"btn2048 arrowBtn2048",onClick:()=>M("left"),"aria-label":"Left",children:"\u25c0\ufe0f"}),(0,o.jsx)("div",{}),(0,o.jsx)("button",{className:"btn2048 arrowBtn2048",onClick:()=>M("right"),"aria-label":"Right",children:"\u25b6\ufe0f"}),(0,o.jsx)("div",{}),(0,o.jsx)("button",{className:"btn2048 arrowBtn2048",onClick:()=>M("down"),"aria-label":"Down",children:"\ud83d\udd3d"}),(0,o.jsx)("div",{})]})]})}}}]);
//# sourceMappingURL=212.97e003fd.chunk.js.map